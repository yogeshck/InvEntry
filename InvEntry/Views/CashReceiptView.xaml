<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:InvEntry.Views"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             x:Class="InvEntry.Views.CashReceiptView"
             xmlns:viewmodels="clr-namespace:InvEntry.ViewModels"
             xmlns:ext="clr-namespace:InvEntry.Extension"
             xmlns:behavior="clr-namespace:InvEntry.Behavior"
             d:DataContext="{d:DesignInstance Type=viewmodels:CashReceiptViewModel}"
             DataContext="{ext:DISource Type=viewmodels:CashReceiptViewModel}"
             mc:Ignorable="d"
             d:DesignHeight="550"
             d:DesignWidth="1200">
    <dxmvvm:Interaction.Behaviors>
        <dxmvvm:KeyToCommand KeyGesture="CTRL+S"
                             Command="{Binding SaveVoucherCommand}" />
    </dxmvvm:Interaction.Behaviors>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <dxb:BarContainerControl>
            <dxb:MainMenuControl>
                <dxb:BarButtonItem x:Name="reset"
                                   Content="Reset Voucher"
                                   BarItemDisplayMode="ContentAndGlyph"
                                   GlyphAlignment="Top"
                                   Glyph="{dx:DXImage 'Images/Actions/Refresh_32x32.png'}"
                                   GlyphSize="Large"
                                   Command="{Binding ResetVoucherCommand}" />
                <dxb:BarButtonItem x:Name="Save"
                                   Content="Save Voucher"
                                   BarItemDisplayMode="ContentAndGlyph"
                                   GlyphAlignment="Top"
                                   Glyph="{dx:DXImage 'Images/Save/Save_32x32.png'}"
                                   GlyphSize="Large"
                                   Command="{Binding SaveVoucherCommand}" />
                <!--    <dxb:BarButtonItem x:Name="btnPrint" 
                   Content="Print" Glyph="{dx:DXImage 'Images/Print/PrintViaPDF_32x32.png'}" 
                   GlyphSize="Large" Alignment="Far"
                    BarItemDisplayMode="ContentAndGlyph" GlyphAlignment="Top"
                                   Command="{Binding VoucherPrintCommand}" /> -->
            </dxb:MainMenuControl>
        </dxb:BarContainerControl>
        <dxlc:LayoutControl Grid.Row="1"
                            Width="400">
            <dxlc:LayoutGroup Orientation="Vertical"
                              View="GroupBox"
                              Header="Voucher"
                              Margin="5">
                <dxlc:LayoutGroup View="Group"
                                  Orientation="Vertical">
                    <dxlc:LayoutItem Label="Type"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:TextEdit Height="42"
                                      IsReadOnly="True"
                                      ShowBorder="False"
                                      FontWeight="ExtraBold"
                                      EditValue="{Binding Voucher.Mode}" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Number"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:TextEdit Height="42"
                                      FontSize="16"
                                      IsReadOnly="True"
                                      CharacterCasing="Upper"
                                      EditValue="{Binding Voucher.VoucherNbr}" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Date  "
                                     FontSize="14"
                                     Margin="5">
                        <dxe:DateEdit Height="42"
                                      IsReadOnly="False"
                                      ShowBorder="False"
                                      EditValue="{Binding Voucher.VoucherDate}">
                            <dxe:DateEdit.StyleSettings>
                                <dxe:DateEditNavigatorStyleSettings />
                            </dxe:DateEdit.StyleSettings>
                        </dxe:DateEdit>
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Transaction Type"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:ComboBoxEdit Height="42"
                                          FontWeight="ExtraBold"
                                          ItemsSource="{Binding FromLedgerList}"
                                          EditValue="{Binding SelectedLedger}"
                                          IsTextEditable="False">
                        </dxe:ComboBoxEdit>
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Mobile #"
                                     FontSize="14"
                                     Margin="5"
                                     Height="42">
                        <dxe:TextEdit EditValue="{Binding CustomerPhoneNumber}"
                                      Name="CustomerMobileNbr">
                            <dxmvvm:Interaction.Behaviors>
                                <dxmvvm:EventToCommand EventName="EditValueChanged"
                                                       Command="{Binding FetchCustomerCommand}"
                                                       PassEventArgsToCommand="True" />
                                <dxmvvm:EventToCommand EventName="Loaded"
                                                       Command="{Binding FocusCommand}"
                                                       CommandParameter="{Binding ElementName=CustomerMobileNbr}" />
                            </dxmvvm:Interaction.Behaviors>
                        </dxe:TextEdit>
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Name"
                                     FontSize="14"
                                     Margin="5"
                                     Height="42">
                        <dxe:TextEdit EditValue="{Binding Payer.CustomerName}"
                                      IsReadOnly="{Binding CustomerReadOnly}"
                                      Name="CustomerNameUI"
                                      CharacterCasing="Upper">
                        </dxe:TextEdit>
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Address"
                                     FontSize="14"
                                     Margin="5"
                                     Height="42">
                        <dxe:TextEdit EditValue="{Binding Payer.LedgerName}"
                                      IsReadOnly="{Binding CustomerReadOnly}"
                                      CharacterCasing="Upper" />
                    </dxlc:LayoutItem>
                    <!--       <dxlc:LayoutItem Label="Ref#"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:ComboBoxEdit Height="42"
                                          FontWeight="ExtraBold"
                                          ItemsSource="{Binding OsInvoiceList}"
                                          EditValue="{Binding SelectedInv}"
                                          IsTextEditable="False">
                        </dxe:ComboBoxEdit>
                    </dxlc:LayoutItem>   


                    <dxlc:LayoutItem Label="Ref#"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:ComboBoxEdit x:Name="InvoiceCombo"
                                          Height="42"
                                          FontWeight="ExtraBold"
                                          ItemsSource="{Binding OsInvoiceList}"
                                          EditValue="{Binding SelectedInv}"
                                          IsTextEditable="False">
                            <dxe:ComboBoxEdit.PopupContentTemplate>
                                <ControlTemplate>
                                    <Border Background="#FFF"
                                            CornerRadius="8"
                                            Padding="10"
                                            BorderBrush="#CCC"
                                            BorderThickness="1">
                                        <StackPanel>
                                            <TextBlock Text="Select Invoice"
                                                       FontWeight="SemiBold"
                                                       FontSize="16"
                                                       Margin="0,0,0,8" />
                                            <ListBox ItemsSource="{Binding OsInvoiceList}"
                                                     BorderThickness="0"
                                                     Background="Transparent">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Margin="2"
                                                                Padding="8"
                                                                Background="Transparent"
                                                                CornerRadius="4"
                                                                MouseLeftButtonUp="InvoiceItem_Click">
                                                            <TextBlock Text="{Binding}"
                                                                       FontSize="14" />
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver"
                                                                                 Value="True">
                                                                            <Setter Property="Background"
                                                                                    Value="#EEE" />
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>
                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </dxe:ComboBoxEdit.PopupContentTemplate>
                        </dxe:ComboBoxEdit>
                    </dxlc:LayoutItem>   -->


                    <dxlc:LayoutItem Label="Ref#"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:ComboBoxEdit x:Name="InvoiceCombo"
                                          Height="42"
                                          FontWeight="ExtraBold"
                                          ItemsSource="{Binding OsInvoicesList}"
                                          EditValue="{Binding SelectedInv}"
                                          IsTextEditable="False"
                                          DisplayMember="InvNbr">
                            <dxe:ComboBoxEdit.PopupContentTemplate>
                                <ControlTemplate>
                                    <Border Background="#FFF"
                                            CornerRadius="8"
                                            Padding="10"
                                            BorderBrush="#CCC"
                                            BorderThickness="1">
                                        <StackPanel>
                                            <TextBlock Text="Select Invoice"
                                                       FontWeight="SemiBold"
                                                       FontSize="16"
                                                       Margin="0,0,0,8" />
                                            <ListBox ItemsSource="{Binding Path=ItemsSource, RelativeSource={RelativeSource AncestorType={x:Type dxe:ComboBoxEdit}}}"
                                                     SelectedItem="{Binding Path=EditValue, RelativeSource={RelativeSource AncestorType={x:Type dxe:ComboBoxEdit}}, Mode=TwoWay}"
                                                     SelectionChanged="ListBox_SelectionChanged"
                                                     BorderThickness="0"
                                                     Background="Transparent">
                                                <ListBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Margin="2"
                                                                Padding="8"
                                                                Background="Transparent"
                                                                CornerRadius="4">
                                                            <StackPanel>
                                                                <TextBlock Text="{Binding InvNbr}"
                                                                           FontWeight="Bold" />
                                                                <TextBlock Text="{Binding InvDate, StringFormat='Date: {0:dd/MM/yyyy}'}" />
                                                                <TextBlock Text="{Binding InvBalance, StringFormat='Amount: ₹{0:N2}'}" />
                                                            </StackPanel>
                                                        </Border>
                                                    </DataTemplate>
                                                </ListBox.ItemTemplate>
                                            </ListBox>

                                        </StackPanel>
                                    </Border>
                                </ControlTemplate>
                            </dxe:ComboBoxEdit.PopupContentTemplate>
                        </dxe:ComboBoxEdit>
                    </dxlc:LayoutItem>

                    <dxlc:LayoutItem Label="Amount"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:TextEdit x:Name="AmountField"
                                      Height="42"
                                      FontSize="16"
                                      EditValue="{Binding Voucher.TransAmount}"
                                      MaskType="Numeric" />
                    </dxlc:LayoutItem>

                    <dxlc:LayoutItem Label="Notes"
                                     FontSize="14"
                                     Margin="5">
                        <dxe:TextEdit Height="100"
                                      FontSize="16"
                                      VerticalAlignment="Top"
                                      HorizontalContentAlignment="Left"
                                      VerticalContentAlignment="Top"
                                      TextWrapping="Wrap"
                                      AcceptsReturn="True"
                                      Padding="5"
                                      EditValue="{Binding VoucherTransDesc, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                      EditValuePostMode="Immediate"
                                      EditValueChanged="NotesTextEdit_EditValueChanged" />
                    </dxlc:LayoutItem>

                </dxlc:LayoutGroup>
            </dxlc:LayoutGroup>
        </dxlc:LayoutControl>
    </Grid>
</UserControl>
