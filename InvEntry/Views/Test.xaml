<UserControl x:Class="InvEntry.Views.Test"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:local="clr-namespace:InvEntry.Views"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="1100">

    <Grid Width="1300" HorizontalAlignment="Left">

        <dxg:GridControl ItemsSource="{Binding Invoices}"
                         AutoGenerateColumns="None">
            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="InvNbr"
                                Header="Invoice #"
                                ReadOnly="True"
                                Width="70" />
                <dxg:GridColumn FieldName="InvDate"
                                Header="Date"
                                ReadOnly="True"
                                Width="100" />
                <dxg:GridColumn FieldName="GrossRcbAmount"
                                Header="Total Amount"
                                Width="100">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True"
                                              Mask="C2" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="DiscountAmount"
                                Header="Discount"
                                Width="90">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True"
                                              Mask="C2" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="AmountPayable"
                                Header="Receivable"
                                Width="120">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True"
                                              Mask="C2" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="RecdAmount"
                                Header="Received"
                                Width="120">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True"
                                              Mask="C2" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="InvBalance"
                                Header="Balance"
                                Width="100">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True"
                                              Mask="C2" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="PaymentDueDate"
                                Header="Due Date"
                                ReadOnly="True"
                                Width="90" />
            </dxg:GridControl.Columns>


            <!-- ✅ Custom layout for two side-by-side grids -->
            <dxg:GridControl.DetailDescriptor>
                <dxg:ContentDetailDescriptor>
                    <dxg:ContentDetailDescriptor.ContentTemplate>
                        <DataTemplate>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="20" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <!-- Invoice Items -->
                                <dxg:GridControl Grid.Column="0"
                                                 ItemsSource="{Binding InvoiceLines}"
                                                 AutoGenerateColumns="None">
                                    <dxg:GridControl.View>
                                        <dxg:TableView ShowGroupPanel="False" />
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.Columns>
                                        <dxg:GridColumn FieldName="ProductName"
                                                        Header="Product" />
                                        <dxg:GridColumn FieldName="ProdQty"
                                                        Header="Qty" />
                                        <dxg:GridColumn FieldName="InvlBilledPrice"
                                                        Header="Price" />
                                        <dxg:GridColumn FieldName="InvlPayableAmt"
                                                        Header="Amount" />
                                    </dxg:GridControl.Columns>
                                </dxg:GridControl>

                                <!-- Spacer -->
                                <Border Grid.Column="1" />

                                <!-- Vouchers -->
                                <dxg:GridControl Grid.Column="2"
                                                 ItemsSource="{Binding Vouchers}"
                                                 AutoGenerateColumns="None">
                                    <dxg:GridControl.View>
                                        <dxg:TableView ShowGroupPanel="False" />
                                    </dxg:GridControl.View>
                                    <dxg:GridControl.Columns>
                                        <dxg:GridColumn FieldName="VoucherType"
                                                        Header="Type" />
                                        <dxg:GridColumn FieldName="TransAmount"
                                                        Header="Amount" />
                                        <dxg:GridColumn FieldName="TransDesc"
                                                        Header="Description" />
                                    </dxg:GridControl.Columns>
                                </dxg:GridControl>
                            </Grid>
                        </DataTemplate>
                    </dxg:ContentDetailDescriptor.ContentTemplate>
                </dxg:ContentDetailDescriptor>
            </dxg:GridControl.DetailDescriptor>
        </dxg:GridControl>


    </Grid>
    
</UserControl>
