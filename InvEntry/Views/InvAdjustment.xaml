<UserControl x:Class="InvEntry.Views.InvAdjustment"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:InvEntry.Views"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:ext="clr-namespace:InvEntry.Extension"
             xmlns:viewmodels="clr-namespace:InvEntry.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Customer Info -->
            <RowDefinition Height="*" />
            <!-- Invoice Grid -->
            <RowDefinition Height="Auto" />
            <!-- Payment Summary -->
        </Grid.RowDefinitions>

        <!-- 👤 Customer Info -->
        <GroupBox Header="Customer Information"
                  Grid.Row="0"
                  FontSize="16"
                  Padding="10"
                  Foreground="#FFD7D32D"  >
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Name:"
                           FontWeight="Bold"
                           Margin="0,0,10,0"
                           Foreground="#FFD7D32D" />
                <TextBlock Text="{Binding Customer.CustomerName}"
                           Margin="0,0,30,0" />
                <TextBlock Text="Mobile:"
                           FontWeight="Bold"
                           Margin="0,0,10,0"
                           Foreground="#FFD7D32D" />
                <TextBlock Text="{Binding Customer.MobileNbr}"
                           Margin="0,0,30,0" />
                <TextBlock Text="Total Outstanding:"
                           FontWeight="Bold"
                           Margin="0,0,10,0"
                           Foreground="#FFD7D32D"  />
                <TextBlock Text="{Binding TotalOutstanding}"
                           Foreground="Red"
                           FontWeight="Bold" />
            </StackPanel>
        </GroupBox>

        <!-- 🧾 Invoice Adjustment Grid -->
        <dxg:GridControl Grid.Row="1"
                         ItemsSource="{Binding OutstandingInvoices}"
                         AutoGenerateColumns="None"
                         FontSize="14">
            <dxg:GridControl.View>
                <dxg:TableView ShowGroupPanel="False"
                               AllowEditing="True"
                               ShowTotalSummary="True" />
            </dxg:GridControl.View>
            <dxg:GridControl.Columns>
                <dxg:GridColumn FieldName="InvoiceNumber"
                                Header="Invoice #"
                                Width="100"
                                ReadOnly="True" />
                <dxg:GridColumn FieldName="InvoiceDate"
                                Header="Date"
                                Width="120"
                                ReadOnly="True" />
                <dxg:GridColumn FieldName="BalanceAmount"
                                Header="Balance"
                                Width="120"
                                ReadOnly="True">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings Mask="C2"
                                              MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="AdjustmentAmount"
                                Header="Adjust Amount"
                                Width="120">
                    <dxg:GridColumn.EditSettings>
                        <dxe:TextEditSettings Mask="C2"
                                              MaskType="Numeric"
                                              MaskUseAsDisplayFormat="True" />
                    </dxg:GridColumn.EditSettings>
                </dxg:GridColumn>
                <dxg:GridColumn FieldName="Remarks"
                                Header="Remarks"
                                Width="200" />
            </dxg:GridControl.Columns>
        </dxg:GridControl>

        <!-- 💳 Payment Summary -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10">
            <TextBlock Text="Total Paid:"
                       FontWeight="Bold"
                       Margin="0,0,10,0" />
            <TextBlock Text="{Binding TotalAdjusted}"
                       Margin="0,0,30,0" />
            <TextBlock Text="Remaining:"
                       FontWeight="Bold"
                       Margin="0,0,10,0" />
            <TextBlock Text="{Binding RemainingAmount}"
                       Foreground="Red"
                       FontWeight="Bold"
                       Margin="0,0,30,0" />
            <Button Content="Save Adjustments"
                    Command="{Binding SaveAdjustmentsCommand}"
                    Background="Green"
                    Foreground="White"
                    Width="150"
                    Height="30" />
        </StackPanel>
    </Grid>

</UserControl>
